<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=0.5"><link rel="stylesheet" href="/css/post.css"><link rel="icon" href="/img/favicon.ico"><title>Spring-声明式事务（二）——传播属性</title></head><body>　　<div class="inner"><h2>Spring-声明式事务（二）——传播属性</h2><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>众所周知，Spring 的事务属性众多，楼主今天将对 Spring 最常用的事务 —— 声明式事务，进行彻底的解释，包括楼主也写了很多的测试例子。代码地址: <a href="https://github.com/stateIs0/Transactional" target="_blank" rel="noopener">使用 tk-mybatis 的 demo 测试了 Spring 的事务</a></p>
<h2 id="传播属性"><a href="#传播属性" class="headerlink" title="传播属性"></a>传播属性</h2><p>传播属性相对隔离属性，使用的较少，类型也较多。同时有些概念也必将繁杂，难以定义，楼主也是写了很多的测试代码，才得出一些结论。</p>
<p>Spring 事务中有 7 个传播属性：</p>
<ol>
<li>PROPAGATION_REQUIRED</li>
<li>PROPAGATION_SUPPORTS</li>
<li>PROPAGATION_MANDATORY</li>
<li>PROPAGATION_REQUIRES_NEW</li>
<li>PROPAGATION_NOT_SUPPORTED</li>
<li>PROPAGATION_NEVER</li>
<li>PROPAGATION_NESTED</li>
</ol>
<p>一张表格搞定：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4236553-7b505395fbac1215.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>这张表格是楼主测试了无数遍得来的，大家可以用楼主代码的例子跑跑看。</p>
<p>总之，默认的 Required 足够使用了。所有事务的嵌套都符合定义。</p>
<p>接口与接口之间的事务嵌套使用默认的不会影响业务逻辑。</p>
<p>但注意，由于动态代理的特殊性，如果接口内部的事务方法嵌套，将会导致内层的事务失效，因为它已经不在 Spring 的管理范围之内了。</p>
<p>当然，这张表格可能测的范围还不是百分百的足够，但已经可以理解传播的作用了。如果有兴趣，可以在例子中加入测试代码。</p>
</div><script src="/js/jquery.min.js"></script><script src="/js/main.js"></script></body></html>